<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Set parameters controlling nonparametric estimation of controlled effect curves — params_ce_np • vaccine</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Set parameters controlling nonparametric estimation of controlled effect curves — params_ce_np"><meta name="description" content="This should be used in conjunction with est_ce to
    set parameters controlling nonparametric estimation of controlled effect
    curves; see examples."><meta property="og:description" content="This should be used in conjunction with est_ce to
    set parameters controlling nonparametric estimation of controlled effect
    curves; see examples."><meta property="og:image" content="https://avi-kenny.github.io/vaccine/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vaccine</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/vaccine.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Avi-Kenny/vaccine/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set parameters controlling nonparametric estimation of controlled effect curves</h1>
      <small class="dont-index">Source: <a href="https://github.com/Avi-Kenny/vaccine/blob/master/R/params.R" class="external-link"><code>R/params.R</code></a></small>
      <div class="d-none name"><code>params_ce_np.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This should be used in conjunction with <code><a href="est_ce.html">est_ce</a></code> to
    set parameters controlling nonparametric estimation of controlled effect
    curves; see examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">params_ce_np</span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="st">"decr"</span>,</span>
<span>  edge_corr <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  grid_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">101</span>, s <span class="op">=</span> <span class="fl">101</span>, x <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>  surv_type <span class="op">=</span> <span class="st">"survML-G"</span>,</span>
<span>  density_type <span class="op">=</span> <span class="st">"binning"</span>,</span>
<span>  density_bins <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  deriv_type <span class="op">=</span> <span class="st">"m-spline"</span>,</span>
<span>  convex_type <span class="op">=</span> <span class="st">"GCM"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>One of c("decr", "incr"); controls the direction of monotonicity.
If dir="decr", it is assumed that CR decreases as a function of the
marker. If dir="incr", it is assumed that CR increases as a function of
the marker.</p></dd>


<dt id="arg-edge-corr">edge_corr<a class="anchor" aria-label="anchor" href="#arg-edge-corr"></a></dt>
<dd><p>Boolean. If TRUE, the "edge correction" is performed to
adjust for bias near the marker lower limit (see references). It is
recommended that the edge correction is only performed if there are at
least (roughly) 10 events corresponding to the marker lower limit.</p></dd>


<dt id="arg-grid-size">grid_size<a class="anchor" aria-label="anchor" href="#arg-grid-size"></a></dt>
<dd><p>A list with keys <code>y</code>, <code>s</code>, and <code>x</code>; controls
the rounding of data values. Decreasing the grid size values results in
shorter computation times, and increasing the values results in more
precise estimates. If grid_size$s=101, this means that a grid of 101
equally-spaced points (defining 100 intervals) will be created from
min(S) to max(S), and each S value will be rounded to the nearest grid
point. For grid_size$y, a grid will be created from 0 to t_0, and then
extended to max(Y). For grid_size$x, a separate grid is created for each
covariate column (binary/categorical covariates are ignored).</p></dd>


<dt id="arg-surv-type">surv_type<a class="anchor" aria-label="anchor" href="#arg-surv-type"></a></dt>
<dd><p>One of c("Cox", "survSL", "survML-G", "survML-L"); controls
the method to use to estimate the conditional survival and conditional
censoring functions. If type="Cox", a survival function based on a Cox
proportional hazard model will be used. If type="survSL", the Super
Learner method of Westling 2023 is used. If type="survML-G", the global
survival stacking method of Wolock 2022 is used. If type="survML-L", the
local survival stacking method of Polley 2011 is used.</p></dd>


<dt id="arg-density-type">density_type<a class="anchor" aria-label="anchor" href="#arg-density-type"></a></dt>
<dd><p>One of c("binning", "parametric"); controls the method to
use to estimate the density ratio f(S|X)/f(S).</p></dd>


<dt id="arg-density-bins">density_bins<a class="anchor" aria-label="anchor" href="#arg-density-bins"></a></dt>
<dd><p>An integer; if density_type="binning", the number of bins
to use. If density_bins=0, the number of bins will be selected via
cross-validation.</p></dd>


<dt id="arg-deriv-type">deriv_type<a class="anchor" aria-label="anchor" href="#arg-deriv-type"></a></dt>
<dd><p>One of c("m-spline", "linear"); controls the method to use
to estimate the derivative of the CR curve. If deriv_type="linear", a
linear spline is constructed based on the midpoints of the jump points of
the estimated function (plus the estimated function evaluated at the
endpoints), which is then numerically differentiated.
deriv_type="m-spline" is similar to deriv_type="linear" but smooths the
set of points (using the method of Fritsch and Carlson 1980) before
differentiating.</p></dd>


<dt id="arg-convex-type">convex_type<a class="anchor" aria-label="anchor" href="#arg-convex-type"></a></dt>
<dd><p>One of c("GCM", "CLS"). Whether the greatest convex
minorant ("GCM") or convex least squares ("CLS") projection should be
used in the smoothing of the primitive estimator Gamma_n.
convex_type="CLS" is experimental and should be used with caution.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of options.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">hvtn505</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="load_data.html">load_data</a></span><span class="op">(</span>time<span class="op">=</span><span class="st">"HIVwk28preunblfu"</span>, event<span class="op">=</span><span class="st">"HIVwk28preunbl"</span>, vacc<span class="op">=</span><span class="st">"trt"</span>,</span>
<span>                 marker<span class="op">=</span><span class="st">"IgG_V2"</span>, covariates<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>,<span class="st">"BMI"</span>,<span class="st">"bhvrisk"</span><span class="op">)</span>,</span>
<span>                 weights<span class="op">=</span><span class="st">"wt"</span>, ph2<span class="op">=</span><span class="st">"casecontrol"</span>, data<span class="op">=</span><span class="va">hvtn505</span><span class="op">)</span></span>
<span><span class="co"># \donttest{</span></span>
<span><span class="va">ests_np</span> <span class="op">&lt;-</span> <span class="fu"><a href="est_ce.html">est_ce</a></span><span class="op">(</span></span>
<span>  dat <span class="op">=</span> <span class="va">dat</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"NP"</span>,</span>
<span>  t_0 <span class="op">=</span> <span class="fl">578</span>,</span>
<span>  params_np <span class="op">=</span> <span class="fu">params_ce_np</span><span class="op">(</span>edge_corr<span class="op">=</span><span class="cn">TRUE</span>, surv_type<span class="op">=</span><span class="st">"survML-L"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># }</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Avi Kenny.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

