---
title: "Basic package workflow"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Basic package workflow}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(vaccine)
```

First, we'll load and process a (fake) sample dataset

```{r}

data(hvtn505)

dat <- load_data(
  time = "HIVwk28fu", # HIVwk28preunblfu
  event = "HIVwk28preunbl", # HIVwk28preunbl
  vacc = "trt",
  marker = "logpctpos_scaled",
  covariates = c("age", "BMI", "bhvrisk"),
  weights = "wt",
  ph2 = "casecontrol",
  data = hvtn505
)

```

The `summary_stats` function gives us some useful summaries of the dataset

```{r}

ss <- summary_stats(dat)

```

The `overall` function allows us to calculate overall risk and vaccine efficacy using either a nonparametric Kaplan-Meier estimator or a marginalized Cox model.

```{r}

overall(dat=dat, t_0=578)

```
